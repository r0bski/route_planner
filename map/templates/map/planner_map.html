{% extends 'map/base.html' %}
{% load static %}

{% block content %}
<head>
  <title>Map View</title>
</head>
<!-- The map fills the entire background -->
<div id="map"></div>

<!-- Reset button -->
<button id="resetBtn">Reset</button>




<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // Initialize the map
  var map = L.map('map').setView([51.5074, -0.1278], 13);

  // Add OSM tile layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  // 3. Array to store clicked coordinates
  var clickedCoords = [];

  // 4. Layer group to hold markers (so we can clear them easily)
  var markersLayer = L.layerGroup().addTo(map);

  // 5. Handle map clicks
  map.on('click', function(e) {
    var lat = e.latlng.lat;
    var lng = e.latlng.lng;

    // Store in array
    clickedCoords.push([lat, lng]);

    // Add marker to layer group
    L.marker([lat, lng])
      .bindPopup("Lat: " + lat.toFixed(5) + "<br>Lng: " + lng.toFixed(5))
      .addTo(markersLayer)
      .openPopup();

    console.log("Stored coordinates:", clickedCoords);
  });

  // 6. Reset button click handler
  document.getElementById('resetBtn').addEventListener('click', function() {
    // Clear markers from map
    markersLayer.clearLayers();

    // Empty the coordinates array
    clickedCoords = [];

    console.log("Coordinates cleared:", clickedCoords);
  });
</script>





{% endblock content %}